(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fa0"],{"12b2":function(t,e,a){"use strict";var o=a("7960"),i=a.n(o);i.a},"386d":function(t,e,a){a("214f")("search",1,function(t,e,a){return[function(a){"use strict";var o=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,o):new RegExp(a)[e](String(o))},a]})},7960:function(t,e,a){},"7a55":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-category"},[a("div",{staticClass:"layout-category-table"},[a("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),a("Modal",{attrs:{title:"内容管理",width:"1200",transfer:!1},model:{value:t.modalNew,callback:function(e){t.modalNew=e},expression:"modalNew"}},[a("div",{staticClass:"layout-category-add"},[a("Button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"success"},on:{click:t.modalAddBtn}},[t._v("添加")]),a("Modal",{attrs:{title:"添加节目",transfer:!0,width:"1200"},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.addOk}},[t._v("确定")])],1),a("Form",{attrs:{model:t.search,"label-position":"right",inline:""}},[a("FormItem",{attrs:{label:"所属分类:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择所属分类..."},model:{value:t.search.category_id,callback:function(e){t.$set(t.search,"category_id",e)},expression:"search.category_id"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.Taxonomy,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})],2)],1),a("FormItem",{attrs:{label:"名称:","label-width":50}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称搜索..."},model:{value:t.search.keywords,callback:function(e){t.$set(t.search,"keywords",e)},expression:"search.keywords"}})],1),a("FormItem",{attrs:{label:"付费类型:","label-width":80}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择是否付费..."},model:{value:t.search.cost_type,callback:function(e){t.$set(t.search,"cost_type",e)},expression:"search.cost_type"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:1}},[t._v("会员")]),a("Option",{attrs:{value:0}},[t._v("免费")]),a("Option",{attrs:{value:2}},[t._v("单片购买")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("搜索")])],1)],1),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns3,data:t.data3},on:{"on-select":t.checkBoxlist,"on-select-cancel":t.checkBoxlistCancel,"on-select-all":t.checkBoxlist}}),a("div",{staticClass:"layout-category-page"},[a("Page",{attrs:{total:t.total1,current:t.page,"page-size":t.pageSize1,"show-elevator":""},on:{"on-change":t.changePage1}})],1),a("div",{staticStyle:{clear:"both"}})],1)],1),a("Table",{staticStyle:{clear:"both"},attrs:{border:"",columns:t.columns2,data:t.data2}}),a("div",{staticClass:"layout-category-page"},[a("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1),a("div",{staticStyle:{clear:"both"}})],1),a("Modal",{attrs:{title:"查看详情",width:"700"},model:{value:t.modalInfo,callback:function(e){t.modalInfo=e},expression:"modalInfo"}},[a("div",[a("div",{staticStyle:{padding:"10px"}})])]),a("Modal",{attrs:{title:"修改"},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:function(e){t.modalEdit1=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),a("Form",{ref:"edit",attrs:{model:t.edit,"label-position":"right","label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"排序id",prop:"recommend_order"}},[a("Input",{model:{value:t.edit.recommend_order,callback:function(e){t.$set(t.edit,"recommend_order",e)},expression:"edit.recommend_order"}})],1)],1)],1)],1)},i=[],n=(a("386d"),a("ac6a"),{data:function(){var t=this;return{modalNew:!1,modalAdd:!1,listId:"",search:{keywords:"",category_id:""},Taxonomy:[],total:0,pageSize:50,page:1,total1:0,pageSize1:10,page1:1,news:[],modalInfo:!1,videoId:"",GroupList:[],edit:{},modalEdit:!1,listId1:"",videoId1:"",ruleValidate:{recommend_order:[{required:!0,message:"请输入排序id",trigger:"blur"}]},columns1:[{type:"index",width:70,align:"center",title:"序号"},{title:"名称",key:"name",align:"center"},{title:"显示名称",key:"title",align:"center"},{title:"操作",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log(a),t.show(a.row)}}},"内容管理")])}}],data1:[],columns2:[{type:"index",width:70,align:"center",title:"序号"},{title:"节目名称",key:"title",align:"center"},{title:"节目分类",key:"category_name",align:"center"},{title:"排序ID",key:"recommend_order",align:"center"},{title:"排序ID(全局排序)",key:"global_order",align:"center"},{title:"类型",key:"Iscost_type",align:"center"},{title:"导演",key:"persons",align:"center"},{title:"上映年代",key:"release_year",align:"center"},{title:"操作",width:170,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify1(a.row)}}},"修改"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove(a.row)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data2:[],columns3:[{type:"selection",width:60,align:"center",_checked:!1},{title:"节目名称",key:"title",align:"center"},{title:"节目分类",key:"channel_name",align:"center"},{title:"排序ID",key:"id",align:"center"},{title:"类型",key:"Iscost_type",align:"center"},{title:"导演",key:"persons",align:"center"},{title:"上映年代",key:"release_time",align:"center"}],data3:[]}},methods:{show:function(t){this.modalNew=!0,this.listId=t.list_id,this.getContentList()},getTabList:function(){var t=this;t.$http(this.$config.BaseURL1+"/media/recommend/lists").then(function(e){1e4==e.data.errno&&(console.log(e),t.data1=e.data.data.list,e.data.data.list.forEach(function(e){t.list_id=e.list_id}))},function(t){})},getContentList:function(){var t=this;t.$http(this.$config.BaseURL1+"/media/recommend/detail?list_id="+t.listId+"&pageSize="+t.pageSize+"&page="+t.page).then(function(e){console.log(e),1e4==e.data.errno&&(t.data2=e.data.data.list,e.data.data.list.forEach(function(t){0==t.cost_type?t.Iscost_type="免费":1==t.cost_type?t.Iscost_type="会员":2==t.cost_type&&(t.Iscost_type="单片购买")}),t.total=e.data.data.total)},function(t){})},modalAddBtn:function(){this.modalAdd=!0,this.getAddList(),this.getSelectList(),this.GroupList=[]},addOk:function(){var t=this,e=this,a={list:[]};this.GroupList.forEach(function(t,e){a.list.push({video_id:t.id,order:e+1})}),e.$http.post(this.$config.BaseURL1+"/media/recommend/add?list_id="+e.listId,a).then(function(a){1e4==a.data.errno&&(e.modalAdd=!1,t.getContentList(),t.$Message.success("添加成功!"))},function(t){})},addCancel:function(){this.modalAdd=!1,this.$Message.info("点击了取消!")},modify1:function(t){this.modalEdit=!0,this.edit=t,console.log(t),this.videoId1=t.id},editOk:function(){var t=this;t.$http.post(this.$config.BaseURL1+"/media/recommend/videoreorder?list_id="+t.listId+"&video_id="+t.videoId1+"&new_order="+t.edit.recommend_order,t.edit,{transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){1e4==e.data.errno&&(console.log(e),t.edit={},t.getContentList(),t.modalEdit=!1,t.$Message.success("修改成功"))},function(t){})},getAddList:function(){var t=this,e=this;void 0==this.search.cost_type&&(this.search.cost_type=""),e.$http(this.$config.BaseURL1+"/media/search?keywords="+e.search.keywords+"&pageSize="+e.pageSize1+"&page="+e.page1+"&category_id="+e.search.category_id+"&cost_type="+e.search.cost_type).then(function(a){1e4==a.data.errno&&(console.log(a),e.data3=a.data.data.list||[],e.total1=a.data.data.total||[],a.data.data.list.forEach(function(e){0==e.cost_type?e.Iscost_type="免费":1==e.cost_type?e.Iscost_type="会员":2==e.cost_type&&(e.Iscost_type="单片购买");var a=!1;t.GroupList.forEach(function(t){e.id==t.id&&(a=!0)}),e._checked=a}))},function(t){})},getSelectList:function(){var t=this;t.$http(this.$config.BaseURL1+"/media/category/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.Taxonomy=e.data.data.list)},function(t){})},changePage:function(t){this.page=t,this.getContentList()},changePage1:function(t){this.page1=t,this.getAddList()},query:function(){this.page=1,this.getAddList()},checkBoxlist:function(t,e){console.log(t),console.log(e),this.GroupList=t},checkBoxlistCancel:function(t,e){console.log(t),console.log(e);var a=[];this.GroupList.forEach(function(t){t.id!=e.id&&a.push(t)}),this.GroupList=a},info:function(){this.modalInfo=!0},remove:function(t){var e=this,a=this;a.$http.post(this.$config.BaseURL1+"/media/recommend/remove?list_id="+a.listId+"&video_id="+t.id).then(function(t){1e4==t.data.errno&&(e.$Message.success("删除成功"),e.getContentList())},function(t){})}},mounted:function(){this.getTabList()}}),s=n,l=(a("12b2"),a("2877")),c=Object(l["a"])(s,o,i,!1,null,null,null);c.options.__file="category.vue";e["default"]=c.exports}}]);