(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32d0"],{"386d":function(t,e,a){a("214f")("search",1,function(t,e,a){return[function(a){"use strict";var i=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i):new RegExp(a)[e](String(i))},a]})},9239:function(t,e,a){"use strict";var i=a("ff49"),o=a.n(i);o.a},"9b31":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-recommendation"},[a("div",{staticClass:"layout-recommendation-table"},[a("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),a("div",{staticClass:"layout-recommendation-application"},[a("Modal",{attrs:{title:"应用管理",width:"1100"},model:{value:t.modalApplication,callback:function(e){t.modalApplication=e},expression:"modalApplication"}},[a("Button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"success"},on:{click:t.modalApplicationAddBtn}},[t._v("添加")]),a("div",{staticStyle:{clear:"both"}}),a("Table",{attrs:{border:"",columns:t.columns2,data:t.data2}}),a("div",{staticClass:"layout-recommendation-page"},[a("Page",{attrs:{total:t.total1,current:t.page1,"page-size":t.pageSize1,"show-elevator":""},on:{"on-change":t.changePage1}})],1),a("div",{staticStyle:{"margin-top":"40px"}})],1)],1),a("Modal",{attrs:{title:"修改"},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:t.modalEditBtn}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),a("Form",{ref:"edit",attrs:{model:t.edit,"label-position":"right","label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"排序id"}},[a("Input",{model:{value:t.edit.order,callback:function(e){t.$set(t.edit,"order",e)},expression:"edit.order"}})],1)],1)],1),a("Modal",{attrs:{title:"添加",width:"1100"},on:{"on-cancel":t.ApplicationAddCancel},model:{value:t.modalApplicationAdd,callback:function(e){t.modalApplicationAdd=e},expression:"modalApplicationAdd"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:t.ApplicationAddCancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.ApplicationAddOk}},[t._v("确定")])],1),a("div",{staticClass:"layout-recommendation-search"},[a("Form",{attrs:{model:t.search,inline:""}},[a("FormItem",{attrs:{label:"应用名称:","label-width":70}},[a("Input",{attrs:{placeholder:"请输入应用名称..."},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("FormItem",{attrs:{label:"一级分类:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择一级分类..."},on:{"on-change":t.changeSearchCategoryId},model:{value:t.search.category_id,callback:function(e){t.$set(t.search,"category_id",e)},expression:"search.category_id"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.cityList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n                        ")])})],2)],1),a("FormItem",{attrs:{label:"二级分类:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择..."},model:{value:t.search.category_sub_Id,callback:function(e){t.$set(t.search,"category_sub_Id",e)},expression:"search.category_sub_Id"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.cityList1,function(e){return e.parent_id==t.search.category_id||0==t.search.category_id?a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n                        ")]):t._e()})],2)],1),a("FormItem",{attrs:{label:"横竖屏:","label-width":60}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择横竖屏..."},model:{value:t.search.screen,callback:function(e){t.$set(t.search,"screen",e)},expression:"search.screen"}},[a("Option",{attrs:{value:0}},[t._v("全部")]),a("Option",{attrs:{value:1}},[t._v("横屏")]),a("Option",{attrs:{value:2}},[t._v("竖屏")]),a("Option",{attrs:{value:3}},[t._v("自适应")])],1)],1),a("FormItem",{attrs:{label:"包含付费:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择包含付费..."},model:{value:t.search.free,callback:function(e){t.$set(t.search,"free",e)},expression:"search.free"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:1}},[t._v("付费")]),a("Option",{attrs:{value:0}},[t._v("免费")]),a("Option",{attrs:{value:2}},[t._v("分享后免费")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("搜索")])],1)],1)],1),a("Table",{attrs:{border:"",columns:t.columns3,data:t.data3},on:{"on-select":t.checkBoxlist,"on-select-cancel":t.checkBoxlistCancel,"on-select-all":t.checkBoxlist}}),a("div",{staticClass:"layout-recommendation-page"},[a("Page",{attrs:{total:t.total2,current:t.page2,"page-size":t.pageSize2,"show-elevator":""},on:{"on-change":t.changePage2}})],1),a("div",{staticStyle:{"margin-top":"40px"}})],1),a("div",{staticClass:"layout-recommendation-page"},[a("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1)},o=[],s=(a("ac6a"),a("7f7f"),a("386d"),a("a322")),n=(a("cadf"),a("551c"),a("097d"),{data:function(){var t,e=this;return t={modalApplication:!1,modalApplicationAdd:!1,page:1,pageSize:30,total:0,page1:1,pageSize1:30,total1:0,sub_id:"",edit:{},modalEdit:!1,page2:1,pageSize2:30,total2:0,search:{name:"",category_id:"",category_sub_Id:"",screen:"",free:""},id:"",order:"",columns1:[{title:"序号",key:"sort_id",align:"center"},{title:"名称",key:"name",align:"center"},{title:"显示名称",key:"display_name",align:"center"},{title:"操作",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.application(a.row)}}},"应用管理")])}}],data1:[],columns2:[{title:"序号",type:"index",width:70,align:"center"},{title:"应用名称",key:"app_name",align:"center"},{title:"一级分类",key:"category_name",align:"center"},{title:"排序ID",key:"order",align:"center"},{title:"包含付费内容",key:"free",align:"center"},{title:"发布时间",key:"create_time",align:"center"},{title:"操作",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modify(a.row)}}},"修改"),t("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){e.remove(a.row)}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data2:[],columns3:[{type:"selection",width:60,align:"center",_checked:!1},{title:"应用ID",key:"id",align:"center"},{title:"应用名称",key:"name",align:"center"},{title:"一级分类",key:"category_name",align:"center"},{title:"二级分类",key:"category_sub_str",align:"center"},{title:"横竖屏",key:"is_screen",align:"center"},{title:"包含付费",key:"is_free",align:"center"}],data3:[],recommend_id:""},Object(s["a"])(t,"search",{name:"",category_id:"",category_sub_Id:"",screen:"",free:"",status:""}),Object(s["a"])(t,"cityList",[]),Object(s["a"])(t,"cityList1",[]),Object(s["a"])(t,"GroupList",[]),Object(s["a"])(t,"ruleValidate",{order:[{required:!0,message:"请输入排序ID...",trigger:"blur",type:"number"}]}),t},methods:{getTableList:function(){var t=this;this.$http.get(this.$config.BaseURL11+"/appstore/admin/v1/app/recommend/info?page="+this.page+"&page_size="+this.pageSize).then(function(e){console.log(e),1e4==e.data.errno&&(t.data1=e.data.data.list,t.total=e.data.data.total)})},changePage:function(t){this.page=t,this.getTableList()},application:function(t){console.log(t),this.recommend_id=t.id,this.id=t.sort_id,console.log(this.recommend_id),this.getApplicationtableList(),this.modalApplication=!0},getApplicationtableList:function(){var t=this;this.$http.get(this.$config.BaseURL11+"/appstore/admin/v1/app/recommend/sub/list?recommend_id="+this.recommend_id+"&page="+this.page1+"&page_size="+this.pageSize1).then(function(e){1e4==e.data.errno&&(t.data2=e.data.data.list,t.total1=e.data.data.total)})},changePage1:function(t){this.page1=t,this.getApplicationtableList()},modify:function(t){console.log(t),this.modalEdit=!0,this.edit=t,this.sub_id=t.sub_id,this.order=t.order},editOk:function(){var t=this;this.edit.order*=1,console.log(this.edit.order);var e=!0;this.$refs["edit"].validate(function(a){0==a&&(t.$Message.error("表单输入有误,请检查!"),e=!1)}),0!=e&&this.$http.post(this.$config.BaseURL11+"/appstore/admin/v1/app/recommend/modify",{sub_id:this.sub_id,order:this.edit.order}).then(function(e){1e4==e.data.errno&&(t.modalEdit=!1,t.getApplicationtableList(),t.$Message.success("修改成功！"))})},modalEditBtn:function(){this.modalEdit=!1,this.getApplicationtableList()},remove:function(t){var e=this;console.log(t),this.$http.post(this.$config.BaseURL11+"/appstore/admin/v1/app/recommend/remove",{sub_id:t.sub_id}).then(function(t){1e4==t.data.errno&&(e.getApplicationtableList(),e.$Message.success("删除成功！"))})},modalApplicationAddBtn:function(){this.modalApplicationAdd=!0,this.getApplicationAddTableList(),this.getSelectList(),this.getSelectList1()},getApplicationAddTableList:function(){var t=this;void 0==this.search.free&&(this.search.free=""),void 0==this.search.category_id&&(this.search.category_id=""),void 0==this.search.category_sub_Id&&(this.search.category_sub_Id=""),this.$http.get(this.$config.BaseURL11+"/appstore/admin/v1/app/info?name="+this.search.name+"&category_id="+this.search.category_id+"&category_sub_Id="+this.search.category_sub_Id+"&screen="+this.search.screen+"&free="+this.search.free+"&page="+this.page2+"&page_size="+this.pageSize2).then(function(e){console.log(e),1e4==e.data.errno&&(t.data3=e.data.data.list,e.data.data.list.forEach(function(e){t.category_id=e.category_id,console.log(t.category_id),0==e.screen?e.is_screen="全部":1==e.screen?e.is_screen="横屏":2==e.screen?e.is_screen="竖屏":3==e.screen&&(e.is_screen="自适应"),0==e.free?e.is_free="免费":1==e.free?e.is_free="付费":2==e.free&&(e.is_free="分享后免费");var a=!1;t.GroupList.forEach(function(t){e.id==t.id&&(a=!0)}),e._checked=a}),t.total2=e.data.data.total)})},checkBoxlist:function(t,e){console.log(t),console.log(e),this.GroupList=t},checkBoxlistCancel:function(t,e){console.log(t),console.log(e);var a=[];this.GroupList.forEach(function(t){t.id!=e.id&&a.push(t)}),this.GroupList=a},ApplicationAddOk:function(){var t=this,e={},a=[];this.GroupList.forEach(function(t,e){console.log(t),console.log(e),a.push(t.id)}),e["ids"]=a,e["id"]=this.id,this.$http.post(this.$config.BaseURL11+"/appstore/admin/v1/app/recommend/add",e).then(function(e){1e4==e.data.errno&&(t.modalApplicationAdd=!1,t.getApplicationtableList(),t.$Message.success("添加成功！"))})},ApplicationAddCancel:function(){this.modalApplicationAdd=!1,this.search.name="",this.search.category_id=[],this.search.category_sub_Id=[],this.search.screen=[],this.search.free=[],this.getApplicationtableList()},query:function(){this.page2=1,this.getApplicationAddTableList()},changePage2:function(t){this.page2=t,this.getApplicationAddTableList()},getSelectList:function(){var t=this;this.search.category_sub_Id="",this.$http.get(this.$config.BaseURL11+"/appstore/admin/v1/category/list").then(function(e){1e4==e.data.errno&&(t.cityList=e.data.data.list)})},getSelectList1:function(){var t=this;this.$http.get(this.$config.BaseURL11+"/appstore/admin/v1/categorytwo/list?pageSize="+-1).then(function(e){1e4==e.data.errno&&(t.cityList1=e.data.data.list)})},changeSearchCategoryId:function(t){this.search.category_sub_Id=""}},mounted:function(){this.getTableList()}}),c=n,r=(a("9239"),a("2877")),l=Object(r["a"])(c,i,o,!1,null,null,null);l.options.__file="recommendation.vue";e["default"]=l.exports},ff49:function(t,e,a){}}]);