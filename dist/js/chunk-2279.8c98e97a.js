(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2279"],{6591:function(t,e,i){},a4f3:function(t,e,i){"use strict";var a=i("6591"),o=i.n(a);o.a},d1de:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout-custompromotion"},[i("div",{staticClass:"layout-custompromotion-add"},[i("Button",{attrs:{type:"success"},on:{click:function(e){t.modalAdd=!0}}},[t._v("添加")]),i("Modal",{attrs:{title:"添加"},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.addOk}},[t._v("确定")])],1),i("Form",{ref:"info",attrs:{model:t.info,"label-position":"right","label-width":90,rules:t.ruleValidate}},[i("FormItem",{attrs:{label:"基础模版:"}},[i("Select",{model:{value:t.info.staticTemplateId,callback:function(e){t.$set(t.info,"staticTemplateId",e)},expression:"info.staticTemplateId"}},t._l(t.cityList,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1),i("FormItem",{attrs:{label:"拓展模版名称:"}},[i("Input",{attrs:{placeholder:"请输入拓展模版名称..."},model:{value:t.info.title,callback:function(e){t.$set(t.info,"title",e)},expression:"info.title"}})],1),i("FormItem",{attrs:{label:"渠道:"}},[i("CheckboxGroup",{model:{value:t.info.channel,callback:function(e){t.$set(t.info,"channel",e)},expression:"info.channel"}},t._l(t.Checkboxlist,function(e){return i("Checkbox",{attrs:{label:e.channelId}},[t._v(t._s(e.channelName))])}))],1),i("FormItem",{attrs:{label:"描述:"}},[i("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.info.description,callback:function(e){t.$set(t.info,"description",e)},expression:"info.description"}})],1)],1)],1)],1),i("div",{staticStyle:{clear:"both"}}),i("div",{staticClass:"layout-custompromotion-table"},[i("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),i("div",{staticClass:"layout-custompromotion-edit"},[i("Modal",{attrs:{title:"修改"},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a",{staticClass:"span",on:{click:t.modalEditBtn}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),i("Form",{attrs:{model:t.edit,"label-position":"right","label-width":90}},[i("FormItem",{attrs:{label:"拓展模版名称:"}},[i("Input",{attrs:{placeholder:"请输入拓展模版名称..."},model:{value:t.edit.title,callback:function(e){t.$set(t.edit,"title",e)},expression:"edit.title"}})],1),i("FormItem",{attrs:{label:"描述:"}},[i("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.edit.description,callback:function(e){t.$set(t.edit,"description",e)},expression:"edit.description"}})],1)],1)],1)],1),i("div",{staticClass:"layout-bootvideo-page"},[i("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1)])},o=[],n=(i("ac6a"),i("c1df")),l={data:function(){var t=this;return{info:{},modalAdd:!1,cityList:[],edit:{},modalEdit:!1,id:"",pageSize:30,page:1,total:0,Checkboxlist:[],columns1:[{title:"序号",type:"index",width:70,align:"center"},{title:"模版ID",key:"id",align:"center"},{title:"模版名称",key:"title",align:"center"},{title:"基础模版ID",key:"staticTemplateId",align:"center"},{title:"渠道",key:"channel",align:"center"},{title:"创建时间",key:"IsaddTime",align:"center"},{title:"描述",key:"description",align:"center"},{title:"操作",width:160,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(i.row)}}},"修改"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove(i.row)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[],ruleValidate:{title:[{required:!0,message:"请输入虚拟分类名称",trigger:"blur"}]}}},methods:{getTableList:function(){var t=this;t.$http(this.$config.BaseURL+"/custompromotion/template/list?page="+t.page+"&pageSize="+t.pageSize).then(function(e){1e4==e.data.errno&&(console.log(e),t.data1=e.data.data.list,e.data.data.list.forEach(function(t){t.IsaddTime=n(1e3*t.addTime).format("YYYY-MM-DD HH:mm:ss")}),t.total=e.data.data.total)})},getSelect:function(){var t=this;t.$http(this.$config.BaseURL+"/staticpromotion/template/list").then(function(e){1e4==e.data.errno&&(t.cityList=e.data.data.list)})},getCheckbox:function(){var t=this;t.$http(this.$config.BaseURL2+"/tv/channel/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.Checkboxlist=e.data.data.list,console.log(t.Checkboxlist))},function(t){})},addOk:function(){var t=this,e=this;e.$http.post(this.$config.BaseURL+"/custompromotion/template/save",e.info).then(function(e){1e4==e.data.errno&&(t.info={},t.getTableList(),t.modalAdd=!1,t.$Message.success("添加成功！"))},function(t){})},addCancel:function(){this.info={},this.modalAdd=!1},modify:function(t){console.log(t),this.edit=t,this.modalEdit=!0,this.id=t.id},editOk:function(){var t=this,e=this;e.$http.post(this.$config.BaseURL+"/custompromotion/template/save?id="+e.id,e.edit).then(function(e){1e4==e.data.errno&&(t.getTableList(),t.modalEdit=!1,t.$Message.success("修改成功！"))},function(t){})},modalEditBtn:function(){this.getTableList(),this.modalEdit=!1},remove:function(t){var e=this;console.log(t);var i=this;i.$http(this.$config.BaseURL+"/custompromotion/template/delete?id="+t.id).then(function(t){1e4==t.data.errno&&(e.getTableList(),e.$Message.success("删除成功！"))},function(t){})},changePage:function(t){this.page=t,this.getTableList()}},mounted:function(){this.getTableList(),this.getSelect(),this.getCheckbox()}},s=l,c=(i("a4f3"),i("2877")),d=Object(c["a"])(s,a,o,!1,null,null,null);d.options.__file="custompromotion.vue";e["default"]=d.exports}}]);