(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a69"],{"17f9":function(t,e,a){},"386d":function(t,e,a){a("214f")("search",1,function(t,e,a){return[function(a){"use strict";var s=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,s):new RegExp(a)[e](String(s))},a]})},ac8b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-task"},[a("div",{staticClass:"layout-task-search"},[a("Form",{attrs:{model:t.search,inline:""}},[a("FormItem",{attrs:{label:"终端厂商:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.search.customerId,callback:function(e){t.$set(t.search,"customerId",e)},expression:"search.customerId"}},t._l(t.cityList,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.customerName))])}))],1),a("FormItem",{attrs:{label:"商用型号:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.search.commercialId,callback:function(e){t.$set(t.search,"commercialId",e)},expression:"search.commercialId"}},t._l(t.cityList55,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.commercialName))])}))],1),a("FormItem",{attrs:{label:"内部型号:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.search.insideId,callback:function(e){t.$set(t.search,"insideId",e)},expression:"search.insideId"}},t._l(t.cityList22,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.insideName))])}))],1),a("FormItem",{attrs:{label:"创建时间:","label-width":70}},[a("DatePicker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placement:"bottom-end",placeholder:"请选择创建时间..."},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1),a("FormItem",{attrs:{label:"执行状态:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:1}},[t._v("导入中")]),a("Option",{attrs:{value:2}},[t._v("导入成功")]),a("Option",{attrs:{value:3}},[t._v("导入失败")])],1)],1),a("FormItem",{attrs:{label:"任务名称:","label-width":70}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入任务名称..."},model:{value:t.search.taskName,callback:function(e){t.$set(t.search,"taskName",e)},expression:"search.taskName"}})],1),a("FormItem",{attrs:{"label-width":10}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.query()}}},[t._v("搜索")])],1),a("FormItem",{staticStyle:{float:"right"}},[a("Button",{attrs:{type:"success"},on:{click:function(e){t.modalAdd=!0}}},[t._v("添加")])],1)],1)],1),a("div",{staticClass:"layout-task-add"},[a("Modal",{attrs:{title:"添加"},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.addOk}},[t._v("确定")])],1),a("Form",{ref:"info",attrs:{model:t.info,"label-position":"right","label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"任务名称:",prop:"taskName"}},[a("Input",{attrs:{placeholder:"请输入任务名称..."},model:{value:t.info.taskName,callback:function(e){t.$set(t.info,"taskName",e)},expression:"info.taskName"}})],1),a("FormItem",{attrs:{label:"任务描述:"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入任务描述..."},model:{value:t.info.taskDescribe,callback:function(e){t.$set(t.info,"taskDescribe",e)},expression:"info.taskDescribe"}})],1),a("FormItem",{attrs:{label:"批次:"}},[a("Input",{attrs:{placeholder:"请输入批次..."},model:{value:t.info.batch,callback:function(e){t.$set(t.info,"batch",e)},expression:"info.batch"}})],1),a("FormItem",{attrs:{label:"订单号:"}},[a("Input",{attrs:{placeholder:"请输入订单号..."},model:{value:t.info.orderNumber,callback:function(e){t.$set(t.info,"orderNumber",e)},expression:"info.orderNumber"}})],1),a("FormItem",{attrs:{label:"生产日期:"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"390px"},attrs:{type:"date",placeholder:"请选择生产日期..."},model:{value:t.info.Is_productionTime,callback:function(e){t.$set(t.info,"Is_productionTime",e)},expression:"info.Is_productionTime"}})],1)],1),a("FormItem",{attrs:{label:"生产工厂:"}},[a("Input",{attrs:{placeholder:"请输入生产工厂..."},model:{value:t.info.productionFactory,callback:function(e){t.$set(t.info,"productionFactory",e)},expression:"info.productionFactory"}})],1),a("FormItem",{attrs:{label:"终端厂商:",prop:"customerId"}},[a("Select",{attrs:{placeholder:"请选择终端厂商..."},on:{"on-change":t.getChange},model:{value:t.info.customerId,callback:function(e){t.$set(t.info,"customerId",e)},expression:"info.customerId"}},t._l(t.cityList,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.customerName))])}))],1),a("FormItem",{attrs:{label:"商用型号:",prop:"commercialId"}},[a("Select",{attrs:{placeholder:"请选择商用型号..."},on:{"on-change":t.getChange1},model:{value:t.info.commercialId,callback:function(e){t.$set(t.info,"commercialId",e)},expression:"info.commercialId"}},t._l(t.cityList1,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.commercialName))])}))],1),a("FormItem",{attrs:{label:"内部型号:",prop:"insideId"}},[a("Select",{attrs:{placeholder:"请选择内部型号..."},model:{value:t.info.insideId,callback:function(e){t.$set(t.info,"insideId",e)},expression:"info.insideId"}},t._l(t.cityList2,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.insideName))])}))],1),a("FormItem",{attrs:{label:"渠道:",prop:"channelId"}},[a("Select",{attrs:{placeholder:"请选择渠道..."},model:{value:t.info.channelId,callback:function(e){t.$set(t.info,"channelId",e)},expression:"info.channelId"}},t._l(t.cityList3,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.channelName))])}))],1),a("FormItem",{attrs:{label:"会员套餐:",prop:"membersPackage"}},[a("Select",{attrs:{placeholder:"请选择会员套餐..."},model:{value:t.info.membersPackage,callback:function(e){t.$set(t.info,"membersPackage",e)},expression:"info.membersPackage"}},[a("Option",{attrs:{value:1}},[t._v("无")]),a("Option",{attrs:{value:2}},[t._v("一月")]),a("Option",{attrs:{value:3}},[t._v("一季度")]),a("Option",{attrs:{value:4}},[t._v("半年")]),a("Option",{attrs:{value:5}},[t._v("一年")])],1)],1),a("FormItem",{attrs:{label:"申请人:"}},[a("Input",{attrs:{placeholder:"请输入申请人..."},model:{value:t.info.applicant,callback:function(e){t.$set(t.info,"applicant",e)},expression:"info.applicant"}})],1),a("FormItem",{attrs:{label:"上传终端附件:"}},[a("Upload",{ref:"upload",attrs:{action:t.$config.BaseURLfile+"/common/upload/file","on-success":t.handleSuccess,"with-credentials":!0,format:["excel","xlsx"],"on-format-error":t.handleFormatError}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传终端附件")])],1),a("Button",{attrs:{type:"success"},on:{click:t.downloadExcel}},[t._v("下载模版")])],1)],1)],1)],1),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"layout-task-table"},[a("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),a("div",{staticClass:"layout-task-page"},[a("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1),a("div",{staticClass:"layout-task-info"},[a("Modal",{attrs:{title:"详情",width:"700"},model:{value:t.modalInfo,callback:function(e){t.modalInfo=e},expression:"modalInfo"}},[a("Row",[a("Col",{attrs:{span:"8"}},[t._v(" 任务名称:"+t._s(t.news.taskName)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 批次:"+t._s(t.news.batch)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 订单号:"+t._s(t.news.orderNumber)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 生产日期:"+t._s(t.news.productionTime)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 生产工厂:"+t._s(t.news.productionFactory)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 终端厂商:"+t._s(t.news.customerName)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 商用型号:"+t._s(t.news.commercialName)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 内部型号:"+t._s(t.news.insideName)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 渠道:"+t._s(t.news.channelValue)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 申请人:"+t._s(t.news.applicant)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 执行结果:"+t._s(t.news.result)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 执行状态:"+t._s(t.news.ISstatus)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 创建人:"+t._s(t.news.createUser)+"\n                ")]),a("Col",{attrs:{span:"8"}},[t._v(" 创建时间:"+t._s(t.news.createTime)+"\n                ")]),a("Col",{attrs:{span:"24"}},[a("div",{staticStyle:{"word-break":"break-all","word-wrap":"break-word"}},[t._v("\n                    任务描述:"+t._s(t.news.taskDescribe)+"\n                ")])])],1)],1)],1),a("div",[a("Modal",{attrs:{title:"执行结果",width:"1100"},model:{value:t.modalRes,callback:function(e){t.modalRes=e},expression:"modalRes"}},[a("Table",{attrs:{border:"",columns:t.columns2,data:t.data2}})],1)],1),a("div",{staticClass:"layout-task-edit"},[a("Modal",{attrs:{title:"修改"},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:function(e){t.modalEdit=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),a("Form",{ref:"edit",attrs:{model:t.edit,"label-position":"right","label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"任务名称:",prop:"taskName"}},[a("Input",{attrs:{placeholder:"请输入任务名称..."},model:{value:t.edit.taskName,callback:function(e){t.$set(t.edit,"taskName",e)},expression:"edit.taskName"}})],1),a("FormItem",{attrs:{label:"任务描述:"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入任务描述..."},model:{value:t.edit.taskDescribe,callback:function(e){t.$set(t.edit,"taskDescribe",e)},expression:"edit.taskDescribe"}})],1),a("FormItem",{attrs:{label:"批次:"}},[a("Input",{attrs:{placeholder:"请输入批次..."},model:{value:t.edit.batch,callback:function(e){t.$set(t.edit,"batch",e)},expression:"edit.batch"}})],1),a("FormItem",{attrs:{label:"订单号:"}},[a("Input",{attrs:{placeholder:"请输入订单号..."},model:{value:t.edit.orderNumber,callback:function(e){t.$set(t.edit,"orderNumber",e)},expression:"edit.orderNumber"}})],1),a("FormItem",{attrs:{label:"生产日期:"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"390px"},attrs:{type:"date",placeholder:"请选择生产日期..."},model:{value:t.edit.productionTime,callback:function(e){t.$set(t.edit,"productionTime",e)},expression:"edit.productionTime"}})],1)],1),a("FormItem",{attrs:{label:"生产工厂:"}},[a("Input",{attrs:{placeholder:"请输入生产工厂..."},model:{value:t.edit.productionFactory,callback:function(e){t.$set(t.edit,"productionFactory",e)},expression:"edit.productionFactory"}})],1),a("FormItem",{attrs:{label:"终端厂商:"}},[a("Select",{attrs:{placeholder:"请选择终端厂商..."},on:{"on-change":t.getChange},model:{value:t.edit.customerId,callback:function(e){t.$set(t.edit,"customerId",e)},expression:"edit.customerId"}},t._l(t.cityList,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.customerName))])}))],1),a("FormItem",{attrs:{label:"商用型号:"}},[a("Select",{attrs:{placeholder:"请选择商用型号..."},on:{"on-change":t.getChange1},model:{value:t.edit.commercialId,callback:function(e){t.$set(t.edit,"commercialId",e)},expression:"edit.commercialId"}},t._l(t.cityList1,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.commercialName))])}))],1),a("FormItem",{attrs:{label:"内部型号:"}},[a("Select",{attrs:{placeholder:"请选择内部型号..."},model:{value:t.edit.insideId,callback:function(e){t.$set(t.edit,"insideId",e)},expression:"edit.insideId"}},t._l(t.cityList2,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.insideName))])}))],1),a("FormItem",{attrs:{label:"渠道:"}},[a("Select",{attrs:{placeholder:"请选择渠道..."},model:{value:t.edit.channelId,callback:function(e){t.$set(t.edit,"channelId",e)},expression:"edit.channelId"}},t._l(t.cityList3,function(e){return a("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.channelName))])}))],1),a("FormItem",{attrs:{label:"会员套餐:",prop:"membersPackage"}},[a("Select",{attrs:{placeholder:"请选择会员套餐..."},model:{value:t.edit.membersPackage,callback:function(e){t.$set(t.edit,"membersPackage",e)},expression:"edit.membersPackage"}},[a("Option",{attrs:{value:1}},[t._v("无")]),a("Option",{attrs:{value:2}},[t._v("一月")]),a("Option",{attrs:{value:3}},[t._v("一季度")]),a("Option",{attrs:{value:4}},[t._v("半年")]),a("Option",{attrs:{value:5}},[t._v("一年")])],1)],1),a("FormItem",{attrs:{label:"申请人:"}},[a("Input",{attrs:{placeholder:"请输入申请人..."},model:{value:t.edit.applicant,callback:function(e){t.$set(t.edit,"applicant",e)},expression:"edit.applicant"}})],1),a("FormItem",{attrs:{label:"上传终端附件:"}},[a("Upload",{ref:"upload1",attrs:{action:t.$config.BaseURLfile+"/common/upload/file","on-success":t.handleSuccess1,"with-credentials":!0,format:["excel","xlsx"],"on-format-error":t.handleFormatError}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传终端附件")])],1)],1)],1)],1)],1)])},i=[],o=(a("ac6a"),a("386d"),a("c1df")),l={data:function(){var t=this;return{info:{},modalAdd:!1,news:{},modalInfo:!1,page:1,total:0,pageSize:30,cityList3:[],addUploadUrl:[],editUploadUrl:[],id:"",edit:{},modalEdit:!1,search:{customerId:"",channelId:"",commercialId:"",taskName:"",status:"",createTime:""},timer:[],cityList:[],cityList1:[],cityList2:[],cityList5:[],cityList22:[],cityList55:[],modalRes:!1,columns1:[{type:"index",width:70,align:"center",title:"序号"},{title:"任务名称",key:"taskName",align:"center"},{title:"内部型号",key:"insideName",align:"center"},{title:"商用型号",key:"commercialName",align:"center"},{title:"终端厂商",key:"customerName",align:"center"},{title:"执行结果",key:"result",align:"center"},{title:"执行状态",key:"ISstatus",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"操作",width:220,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.details(a.row)}}},"详情"),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.results(a.row)}}},"导入中"==a.row.status?"导入中":"异常结果"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.Additional(a.row)}}},"追加任务")])}}],data1:[],columns2:[{title:"mac",key:"mac"},{title:"无线mac",key:"wirelessMac"},{title:"cpuid",key:"cpuId"},{title:"板卡sn",key:"boardCardSn"},{title:"整机sn",key:"completeMachineSn"},{title:"HDCPKey",key:"hdcpKey"},{title:"导入结果",key:"result"},{title:"失败原因",key:"failReason"}],data2:[],ruleValidate:{taskName:[{required:!0,message:"请输入任务名称...",trigger:"blur"}],customerId:[{required:!0,message:"请选择终端厂商...",trigger:"change"}],commercialId:[{required:!0,message:"请选择商用型号...",trigger:"change"}],insideId:[{required:!0,message:"请选择内部型号...",trigger:"change"}],channelId:[{required:!0,message:"请选择渠道...",trigger:"change"}],membersPackage:[{required:!0,message:"请选择会员套餐...",trigger:"blur",type:"number"}]}}},methods:{handleSuccess:function(t,e){console.log(t),this.addUploadUrl=t.data.url,console.log(this.addUploadUrl)},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式文件名不正确，请选择excel或xlsx格式"})},handleSuccess1:function(t,e){console.log(t),this.editUploadUrl=t.data.url,console.log(this.addUploadUrl)},getTableList:function(){var t=this,e=o(t.timer[0]).format("X"),a=o(t.timer[1]).format("X");void 0==this.search.status&&(this.search.status=""),isNaN(e)&&(e=""),isNaN(a)&&(a=""),t.$http(this.$config.BaseURL2+"/tv/task/list?customerId="+t.search.customerId+"&channelId="+t.search.channelId+"&commercialId="+t.search.commercialId+"&taskName="+t.search.taskName+"&status="+t.search.status+"&startTime="+e+"&endTime="+a+"&page="+this.page+"&pageSize="+t.pageSize).then(function(e){1e4==e.data.errno&&(console.log(e),t.data1=e.data.data.list,t.total=e.data.data.total,e.data.data.list.forEach(function(t){1==t.status?t.ISstatus="导入中":2==t.status?t.ISstatus="导入成功":3==t.status&&(t.ISstatus="导入失败")}))})},getSelect:function(){var t=this;t.$http(this.$config.BaseURL2+"/tv/customer/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.cityList=e.data.data.list)})},getSelect1:function(){var t=this;t.$http(this.$config.BaseURL2+"/tv/commercialmodel/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.cityList55=e.data.data.list)})},getSelect2:function(){var t=this;t.$http(this.$config.BaseURL2+"/tv/insidemodel/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.cityList22=e.data.data.list)})},getChange:function(t,e){console.log(1111);var a=this;"undefined"==typeof e&&(this.edit.commercialId=""),a.$http(this.$config.BaseURL2+"/tv/commercialmodel/list?customerId="+t).then(function(t){1e4==t.data.errno&&(console.log(t),a.cityList1=t.data.data.list)})},getChange1:function(t,e){var a=this;"undefined"==typeof e&&(this.edit.insideId=""),a.$http(this.$config.BaseURL2+"/tv/insidemodel/list?commercialId="+t).then(function(t){1e4==t.data.errno&&(a.cityList2=t.data.data.list)})},getSelect3:function(){var t=this;t.$http(this.$config.BaseURL2+"/tv/channel/list").then(function(e){1e4==e.data.errno&&(t.cityList3=e.data.data.list)})},query:function(){this.getTableList()},details:function(t){console.log(t),1==t.status?t.ISstatus="导入中":2==t.status?t.ISstatus="导入成功":3==t.status&&(t.ISstatus="导入失败"),t.IsproductionTime=o(t.productionTime).format("YYYY-MM-DD"),this.news=t,this.modalInfo=!0},results:function(t){var e=this;"导入中"!=t.status?(e.$http(this.$config.BaseURL2+"/tv/task/result?taskId="+t._id).then(function(t){1e4==t.data.errno&&(console.log(t),e.data2=t.data.data.list)}),this.modalRes=!0):this.$Message.warning("导入中不能点击！")},addOk:function(){var t=this,e=this,a=!0;e.$refs["info"].validate(function(e){0==e&&(t.$Message.error("表单输入有误,请检查!"),a=!1)}),0!=a&&(e.info.file=this.addUploadUrl,e.info.productionTime=o(e.info.Is_productionTime).format("X"),e.$http.post(this.$config.BaseURL2+"/tv/device/importTask",e.info).then(function(t){1e4==t.data.errno&&(console.log(t),e.info={},e.modalAdd=!1,e.getTableList(),e.$Message.success("添加成功！"))}))},addCancel:function(){this.info={},this.modalAdd=!1},changePage:function(t){this.page=t,this.getTableList()},Additional:function(t){console.log(t),this.editUploadUrl="",t=JSON.parse(JSON.stringify(t)),this.edit=t,this.id=t._id,this.modalEdit=!0,this.getChange(t.customerId,!0),this.getChange1(t.commercialId,!0),this.$refs.upload1.clearFiles()},editOk:function(){var t=this,e=this;""!=this.editUploadUrl&&(e.edit.file=this.editUploadUrl),e.$http.post(this.$config.BaseURL2+"/tv/device/importTask",e.edit).then(function(a){1e4==a.data.errno&&(e.modalEdit=!1,t.getTableList(),t.$Message.success("追加成功！"))})},downloadExcel:function(){window.open("http://static2.ptxstv.gitv.tv/upload/181127/xlsx/1756361e03398d8bb750b3a41bf4e3bc237da3.xlsx","_blank")}},mounted:function(){this.getTableList(),this.getSelect(),this.getSelect1(),this.getSelect2(),this.getSelect3()}},n=l,r=(a("e9d6"),a("2877")),c=Object(r["a"])(n,s,i,!1,null,null,null);c.options.__file="task.vue";e["default"]=c.exports},e9d6:function(t,e,a){"use strict";var s=a("17f9"),i=a.n(s);i.a}}]);