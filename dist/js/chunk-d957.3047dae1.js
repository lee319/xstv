(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d957"],{1312:function(t,e,i){},"14ae":function(t,e,i){"use strict";var a=i("1312"),o=i.n(a);o.a},"63ba":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout-screensaver"},[i("div",{staticClass:"layout-screensaver-add"},[i("Button",{attrs:{type:"success"},on:{click:function(e){t.modalAddBtn()}}},[t._v("添加")]),i("Modal",{attrs:{title:"添加"},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.addOk}},[t._v("确定")])],1),i("Form",{ref:"info",attrs:{model:t.info,"label-position":"right","label-width":130,rules:t.ruleValidate}},[i("FormItem",{attrs:{label:"广告名称:",prop:"title"}},[i("Input",{attrs:{placeholder:"请输入广告名称..."},model:{value:t.info.title,callback:function(e){t.$set(t.info,"title",e)},expression:"info.title"}})],1),i("FormItem",{attrs:{label:"图片地址:"}},[i("Upload",{ref:"upload",attrs:{action:t.$config.BaseURLfile+"/common/upload/file","on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"with-credentials":!0}},[i("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1),i("FormItem",{attrs:{label:"跳转地址:",prop:"jump"}},[i("Input",{attrs:{placeholder:"请输入跳转地址...",type:"textarea",rows:4},model:{value:t.info.jump,callback:function(e){t.$set(t.info,"jump",e)},expression:"info.jump"}})],1),i("FormItem",{attrs:{label:"状态:",prop:"status"}},[i("Select",{attrs:{placeholder:"请选择状态..."},model:{value:t.info.status,callback:function(e){t.$set(t.info,"status",e)},expression:"info.status"}},[i("Option",{attrs:{value:1}},[t._v("上线")]),i("Option",{attrs:{value:0}},[t._v("下线")])],1)],1),i("FormItem",{attrs:{label:"排序:",prop:"orderNum"}},[i("Input",{attrs:{placeholder:"请输入排序..."},model:{value:t.info.orderNum,callback:function(e){t.$set(t.info,"orderNum",e)},expression:"info.orderNum"}})],1),i("FormItem",{attrs:{label:"广告投放开始时间:",prop:"startTime"}},[i("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"date",placeholder:"请选择广告投放开始时间..."},model:{value:t.info.IsstartTime,callback:function(e){t.$set(t.info,"IsstartTime",e)},expression:"info.IsstartTime"}})],1),i("FormItem",{attrs:{label:"广告投放结束时间:",prop:"endTime"}},[i("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"date",placeholder:"请选择广告投放结束时间..."},model:{value:t.info.IsendTime,callback:function(e){t.$set(t.info,"IsendTime",e)},expression:"info.IsendTime"}})],1)],1)],1)],1),i("div",{staticClass:"layout-screensaver-table"},[i("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),i("Modal",{attrs:{title:"查看详情",width:"700"},model:{value:t.modalInfo,callback:function(e){t.modalInfo=e},expression:"modalInfo"}},[i("div",[i("div",{staticStyle:{padding:"10px"}},[i("Form",{attrs:{model:t.news,"label-position":"right",inline:""}},[i("Row",[i("Col",{attrs:{span:"8"}},[i("p",[t._v("\n              广告ID:"+t._s(t.news.id)+"\n            ")])]),i("Col",{attrs:{span:"8"}},[i("p",[t._v("\n              展示顺序:"+t._s(t.news.orderNum)+"\n            ")])]),i("Col",{attrs:{span:"8"}},[i("p",[t._v("\n              该记录修改时间:"+t._s(t.news.updateTime)+"\n            ")])]),i("Col",{attrs:{span:"8"}},[i("p",[t._v("\n              开始投放时间:"+t._s(t.news.IsstartTime)+"\n            ")])]),i("Col",{attrs:{span:"8"}},[i("p",[t._v("\n              结束投放时间:"+t._s(t.news.IsendTime)+"\n            ")])]),i("Col",{attrs:{span:"24"}},[i("p",[t._v("\n              通用跳转参数:"+t._s(t.news.jump)+"\n            ")])]),i("Col",{attrs:{span:"8"}},[i("p",{staticStyle:{float:"left","margin-top":"5px"}},[t._v("\n              图片地址:\n              "),i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.news.url,alt:""}})])])],1)],1)],1)])]),i("Modal",{attrs:{title:"修改"},on:{"on-cancel":t.modalEditBtn},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),i("Form",{ref:"edit",attrs:{model:t.edit,"label-position":"right","label-width":130,rules:t.ruleValidate1}},[i("FormItem",{attrs:{label:"广告名称:",prop:"title"}},[i("Input",{attrs:{placeholder:"请输入广告名称..."},model:{value:t.edit.title,callback:function(e){t.$set(t.edit,"title",e)},expression:"edit.title"}})],1),i("FormItem",{attrs:{label:"图片地址:"}},[i("Upload",{ref:"upload1",attrs:{action:t.$config.BaseURLfile+"/common/upload/file","on-success":t.handleSuccess1,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"with-credentials":!0}},[i("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1),i("FormItem",{attrs:{label:"跳转地址:",prop:"jump"}},[i("Input",{attrs:{placeholder:"请输入跳转地址...",type:"textarea",rows:4},model:{value:t.edit.jump,callback:function(e){t.$set(t.edit,"jump",e)},expression:"edit.jump"}})],1),i("FormItem",{attrs:{label:"状态:",prop:"status"}},[i("Select",{attrs:{placeholder:"请选择状态..."},model:{value:t.edit.status,callback:function(e){t.$set(t.edit,"status",e)},expression:"edit.status"}},[i("Option",{attrs:{value:1}},[t._v("上线")]),i("Option",{attrs:{value:0}},[t._v("下线")])],1)],1),i("FormItem",{attrs:{label:"排序:",prop:"orderNum"}},[i("Input",{attrs:{placeholder:"请输入排序..."},model:{value:t.edit.orderNum,callback:function(e){t.$set(t.edit,"orderNum",e)},expression:"edit.orderNum"}})],1),i("FormItem",{attrs:{label:"广告投放开始时间:",prop:"startTime"}},[i("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"date",placeholder:"请选择广告投放开始时间..."},model:{value:t.edit.IsstartTime,callback:function(e){t.$set(t.edit,"IsstartTime",e)},expression:"edit.IsstartTime"}})],1),i("FormItem",{attrs:{label:"广告投放结束时间:",prop:"endTime"}},[i("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"date",placeholder:"请选择广告投放结束时间..."},model:{value:t.edit.IsendTime,callback:function(e){t.$set(t.edit,"IsendTime",e)},expression:"edit.IsendTime"}})],1)],1)],1)],1)},o=[],s=(i("ac6a"),i("c1df")),n={data:function(){var t=this;return{news:{},modalInfo:!1,info:{},modalAdd:!1,edit:{},modalEdit:!1,columns1:[{title:"序号",type:"index",width:70,align:"center"},{title:"广告ID",key:"id",align:"center"},{title:"展示顺序",key:"orderNum",align:"center"},{title:"图片地址",key:"url",align:"center",render:function(t,e){return t("div",[t("img",{attrs:{src:e.row.url},style:{width:"50px",height:"50px",marginTop:"5px"}})])}},{title:"通用跳转参数",key:"jump",align:"center",width:270,render:function(t,e){return t("span",{style:{diaplay:"inline-block",width:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.row.jump)}},{title:"状态",key:"Isstatus",align:"center"},{title:"开始投放时间",key:"IsstartTime",align:"center"},{title:"结束投放时间",key:"IsendTime",align:"center"},{title:"该记录修改时间",key:"updateTime",align:"center"},{title:"操作",width:200,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.info1(i.index)}}},"查看详情"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(i.row)}}},"修改"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove(i.index)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[],id:[],addUploadUrl:"",editUploadUrl:"",ruleValidate:{title:[{required:!0,message:"请输入广告名称...",trigger:"blur"}]},ruleValidate1:{title:[{required:!0,message:"请输入广告名称...",trigger:"blur"}]}}},methods:{handleSuccess:function(t,e){console.log(t),this.addUploadUrl=t.data.url,console.log(this.addUploadUrl)},handleSuccess1:function(t,e){console.log(t),this.editUploadUrl=t.data.url,console.log(this.editUploadUrl)},handleFormatError1:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式文件名不正确，请选择JPG或PNG"})},handleMaxSize1:function(t){this.$Notice.warning({title:"超过文件大小限制",desc:"文件  文件名 太大，不超过2M."})},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式文件名不正确，请选择JPG或PNG"})},handleMaxSize:function(t){this.$Notice.warning({title:"超过文件大小限制",desc:"文件  文件名 太大，不超过2M."})},getTableList:function(){var t=this;t.$http(this.$config.BaseURL3+"/common/screensaver/list").then(function(e){1e4==e.data.errno&&(console.log(e),t.data1=e.data.data.list,e.data.data.list.forEach(function(t){console.log(t.startTime),t.IsstartTime=s(1e3*t.startTime).format("YYYY-MM-DD"),t.IsendTime=s(1e3*t.endTime).format("YYYY-MM-DD"),t.updateTime=s(1e3*t.updateTime).format("YYYY-MM-DD"),1==t.status?t.Isstatus="上线":0==t.status&&(t.Isstatus="下线")}))},function(t){})},info1:function(t){this.modalInfo=!0,this.news=this.data1[t],console.log(this.news),this.news.IsstartTime=s(1e3*this.news.startTime).format("YYYY-MM-DD"),this.news.IsendTime=s(1e3*this.news.endTime).format("YYYY-MM-DD")},modalAddBtn:function(){this.addUploadUrl="",this.$refs.upload.clearFiles(),this.modalAdd=!0},addOk:function(){var t=this,e=this,i=!0;e.$refs["info"].validate(function(e){0==e&&(t.$Message.error("表单输入有误,请检查!"),i=!1)}),0!=i&&(e.info.startTime=s(e.info.IsstartTime).format("X"),e.info.endTime=s(e.info.IsendTime).format("X"),e.info.url=this.addUploadUrl,e.$http.post(this.$config.BaseURL3+"/common/screensaver/update",e.info).then(function(e){console.log(e),1e4==e.data.errno&&(t.info={},t.modalAdd=!1,t.getTableList(),t.$Message.success("添加成功"))}))},addCancel:function(){this.modalAdd=!1},modify:function(t){console.log(t),this.editUploadUrl="",t=JSON.parse(JSON.stringify(t)),this.modalEdit=!0,this.edit=t,this.id=t.id},editOk:function(){var t=this,e=this;e.edit.orderNum=e.edit.orderNum+"",e.edit.startTime=e.edit.startTime+"",e.edit.endTime=e.edit.endTime+"",console.log(e.edit.url);var i=!0;e.$refs["edit"].validate(function(e){0==e&&(t.$Message.error("表单输入有误,请检查!"),i=!1)}),0!=i&&(e.edit.startTime=s(e.edit.IstartTime).format("X"),e.edit.endTime=s(e.edit.IsendTime).format("X"),""!=this.editUploadUrl&&(e.edit.url=this.editUploadUrl),console.log(e.edit.url),e.$http.post(this.$config.BaseURL3+"/common/screensaver/update?id="+this.id,e.edit).then(function(e){console.log(e),1e4==e.data.errno&&(t.edit={},t.modalEdit=!1,t.getTableList(),t.$Message.success("修改成功"))}))},modalEditBtn:function(){this.modalEdit=!1,this.getTableList()},remove:function(t){var e=this,i=this;i.$http(this.$config.BaseURL3+"/common/screensaver/del?id="+i.data1[t].id).then(function(t){1e4==t.data.errno&&(e.$Message.success("删除成功"),e.getTableList())})}},mounted:function(){this.getTableList()}},l=n,r=(i("14ae"),i("2877")),d=Object(r["a"])(l,a,o,!1,null,null,null);d.options.__file="screensaver.vue";e["default"]=d.exports}}]);