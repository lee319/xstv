(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-711c"],{"386d":function(e,t,a){a("214f")("search",1,function(e,t,a){return[function(a){"use strict";var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},a]})},"3da8":function(e,t,a){},"763d":function(e,t,a){"use strict";var n=a("3da8"),i=a.n(n);i.a},9614:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-change"},[a("div",{staticClass:"layout-change-search"},[a("Form",{attrs:{model:e.search,inline:""}},[a("FormItem",{attrs:{label:"任务名称:","label-width":70}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入任务名称..."},model:{value:e.search.taskName,callback:function(t){e.$set(e.search,"taskName",t)},expression:"search.taskName"}})],1),a("FormItem",{attrs:{label:"变更类型:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.search.changeType,callback:function(t){e.$set(e.search,"changeType",t)},expression:"search.changeType"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),a("Option",{attrs:{value:1}},[e._v("内部型号")]),a("Option",{attrs:{value:2}},[e._v("渠道")]),a("Option",{attrs:{value:3}},[e._v("批次")]),a("Option",{attrs:{value:4}},[e._v("订单号")]),a("Option",{attrs:{value:5}},[e._v("生产日期")]),a("Option",{attrs:{value:6}},[e._v("生产工厂")])],1)],1),a("FormItem",{attrs:{label:"创建时间:","label-width":70}},[a("DatePicker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placement:"bottom-end",placeholder:"请选择创建时间..."},model:{value:e.timer,callback:function(t){e.timer=t},expression:"timer"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("搜索")])],1)],1)],1),a("div",{staticClass:"layout-change-add"},[a("Button",{attrs:{type:"success"},on:{click:function(t){e.modalAdd=!0,e.fromType=1}}},[e._v("添加")]),a("Modal",{attrs:{title:"添加"},model:{value:e.modalAdd,callback:function(t){e.modalAdd=t},expression:"modalAdd"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a",{staticClass:"span",on:{click:e.okFormcancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.okForm}},[e._v("确定")])],1),a("Form",{attrs:{model:e.info,"label-position":"right","label-width":100}},[a("FormItem",{attrs:{label:"任务名称:"}},[a("Input",{attrs:{placeholder:"请输入任务名称..."},model:{value:e.info.taskName,callback:function(t){e.$set(e.info,"taskName",t)},expression:"info.taskName"}})],1),a("FormItem",{attrs:{label:"任务描述:"}},[a("Input",{attrs:{placeholder:"请输入任务描述..."},model:{value:e.info.taskDescribe,callback:function(t){e.$set(e.info,"taskDescribe",t)},expression:"info.taskDescribe"}})],1),a("FormItem",{attrs:{label:"变更类型:"}},[a("RadioGroup",{model:{value:e.info.changeType,callback:function(t){e.$set(e.info,"changeType",t)},expression:"info.changeType"}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"1"}},[e._v("\n                                内部型号\n                            ")])],1),a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"2"}},[e._v("\n                                渠道\n                            ")])],1),a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"3"}},[e._v("\n                                批次\n                            ")])],1),a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"4"}},[e._v("\n                                订单号\n                            ")])],1),a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"5"}},[e._v("\n                                生产日期\n                            ")])],1),a("Col",{attrs:{span:"8"}},[a("Radio",{attrs:{label:"6"}},[e._v("\n                                生产工厂\n                            ")])],1)],1)],1)],1),1==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"终端厂商:"}},[a("Select",{attrs:{loading:e.customerLoading},on:{"on-change":function(t){e.getCommercialList(""),e.getInsideList("")}},model:{value:e.info.customerId,callback:function(t){e.$set(e.info,"customerId",t)},expression:"info.customerId"}},e._l(e.customerList,function(t,n){return a("Option",{key:n,attrs:{value:t._id}},[e._v(e._s(t.customerName))])}))],1),a("FormItem",{attrs:{label:"商用型号:"}},[a("Select",{attrs:{loading:e.commercialLoading},model:{value:e.info.commercialId,callback:function(t){e.$set(e.info,"commercialId",t)},expression:"info.commercialId"}},e._l(e.commercialList,function(t){return a("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.commercialName))])}))],1),a("FormItem",{attrs:{label:"变更内部型号:"}},[a("Select",{attrs:{loading:e.insideLoading},model:{value:e.info.insideId,callback:function(t){e.$set(e.info,"insideId",t)},expression:"info.insideId"}},e._l(e.insideList,function(t){return a("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.insideName))])}))],1),a("FormItem",[a("Upload",{attrs:{action:e.$config.BaseURLfile+"/common/upload/file","on-success":e.handleSuccess,"with-credentials":!0}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传终端附件")])],1)],1)],1):e._e(),2==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"渠道:"}},[a("Select",{model:{value:e.info.channelId,callback:function(t){e.$set(e.info,"channelId",t)},expression:"info.channelId"}},e._l(e.cityList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n                            ")])}))],1)],1):e._e(),3==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"批次:"}},[a("Input",{attrs:{placeholder:"请输入批次..."},model:{value:e.info.batch,callback:function(t){e.$set(e.info,"batch",t)},expression:"info.batch"}})],1)],1):e._e(),4==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"订单号:"}},[a("Input",{attrs:{placeholder:"请输入订单号..."},model:{value:e.info.orderNumber,callback:function(t){e.$set(e.info,"orderNumber",t)},expression:"info.orderNumber"}})],1)],1):e._e(),5==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"变更生产日期:"}},[a("DatePicker",{staticStyle:{width:"390px"},attrs:{type:"date",placeholder:"请输入变更生产日期..."},model:{value:e.info.productionTime,callback:function(t){e.$set(e.info,"productionTime",t)},expression:"info.productionTime"}})],1),a("FormItem",[a("Upload",{attrs:{action:e.$config.BaseURLfile+"/common/upload/file","on-success":e.handleSuccess,"with-credentials":!0}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传终端附件")])],1)],1)],1):e._e(),6==e.info.changeType?a("div",[a("FormItem",{attrs:{label:"生产工厂:"}},[a("Input",{attrs:{placeholder:"请输入生产工厂..."},model:{value:e.info.productionFactory,callback:function(t){e.$set(e.info,"productionFactory",t)},expression:"info.productionFactory"}})],1)],1):e._e()],1)],1)],1),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"layout-change-table"},[a("Table",{attrs:{border:"",columns:e.columns1,data:e.data1}})],1),a("div",{staticClass:"layout-change-details"},[a("Modal",{attrs:{title:"详情"},model:{value:e.modalDetails,callback:function(t){e.modalDetails=t},expression:"modalDetails"}},[a("Form",{attrs:{"label-position":"right","label-width":100}},[a("p",{staticStyle:{"margin-left":"30px"}},[e._v("\n                    任务名称:"+e._s(e.news.taskName)+"\n                ")]),a("p",{staticStyle:{"margin-left":"30px"}},[e._v("\n                    变更类型："+e._s(e.news.ISchangeType)+"\n                ")]),1==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"终端厂商:"}},[a("Select",{model:{value:e.edit.model1,callback:function(t){e.$set(e.edit,"model1",t)},expression:"edit.model1"}},e._l(e.cityList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("FormItem",{attrs:{label:"商用型号:"}},[a("Select",{model:{value:e.info.model1,callback:function(t){e.$set(e.info,"model1",t)},expression:"info.model1"}},e._l(e.cityList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("FormItem",{attrs:{label:"变更内部型号:"}},[a("Select",{model:{value:e.info.model1,callback:function(t){e.$set(e.info,"model1",t)},expression:"info.model1"}},e._l(e.cityList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("FormItem",[a("Upload",{attrs:{action:e.$config.BaseURLfile+"/common/upload/file","on-success":e.handleSuccess,"with-credentials":!0}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传终端附件")])],1)],1)],1):e._e(),2==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"渠道:"}},[a("Select",{model:{value:e.info.model1,callback:function(t){e.$set(e.info,"model1",t)},expression:"info.model1"}},e._l(e.cityList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1):e._e(),3==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"批次:"}},[a("Input",{attrs:{placeholder:"请输入批次..."},model:{value:e.info.input1,callback:function(t){e.$set(e.info,"input1",t)},expression:"info.input1"}})],1)],1):e._e(),4==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"订单号:"}},[a("Input",{attrs:{placeholder:"请输入订单号..."},model:{value:e.info.input1,callback:function(t){e.$set(e.info,"input1",t)},expression:"info.input1"}})],1)],1):e._e(),5==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"变更生产日期:"}},[a("DatePicker",{staticStyle:{width:"390px"},attrs:{type:"date",placeholder:"请输入变更生产日期..."}})],1),a("FormItem",[a("Upload",{attrs:{action:e.$config.BaseURLfile+"/common/upload/file","on-success":e.handleSuccess,"with-credentials":!0}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传终端附件")])],1)],1)],1):e._e(),6==e.news.changeType?a("div",[a("FormItem",{attrs:{label:"生产工厂:"}},[a("Input",{attrs:{placeholder:"请输入生产工厂..."},model:{value:e.info.input1,callback:function(t){e.$set(e.info,"input1",t)},expression:"info.input1"}})],1)],1):e._e()])],1)],1),a("Modal",{attrs:{title:"执行结果",width:"1100"},model:{value:e.modalEnforcement,callback:function(t){e.modalEnforcement=t},expression:"modalEnforcement"}},[a("div",[a("Form",{attrs:{model:e.searchEnforcement,inline:""}},[a("FormItem",{attrs:{label:"mac:","label-width":40}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入mac..."},model:{value:e.searchEnforcement.mac,callback:function(t){e.$set(e.searchEnforcement,"mac",t)},expression:"searchEnforcement.mac"}})],1),a("FormItem",{attrs:{label:"变更结果:","label-width":70}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.searchEnforcement.result,callback:function(t){e.$set(e.searchEnforcement,"result",t)},expression:"searchEnforcement.result"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),a("Option",{attrs:{value:0}},[e._v("失败")]),a("Option",{attrs:{value:1}},[e._v("成功")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.enforcementQuery}},[e._v("搜索")])],1)],1)],1),a("Table",{attrs:{border:"",columns:e.columns2,data:e.data2}}),a("div",{staticStyle:{float:"right","margin-top":"10px"}},[a("Page",{attrs:{total:e.totalEnforcement,current:e.pageEnforcement,"page-size":e.pageSizeEnforcement,"show-elevator":""},on:{"on-change":e.changePageEnforcement}})],1),a("div",{staticStyle:{"margin-top":"40px"}})],1)],1)},i=[],o=(a("ac6a"),a("386d"),a("c1df")),s={data:function(){var e=this;return{search:{taskName:"",changeType:""},timer:[],info:{changeType:"1"},modalAdd:!1,cityList:[],news:[],edit:{},modalDetails:!1,page:1,taskId:"",searchEnforcement:{result:"",mac:""},modalEnforcement:!1,totalEnforcement:0,pageSizeEnforcement:30,pageEnforcement:1,columns1:[{type:"index",width:70,align:"center",title:"序号"},{title:"任务名称",key:"taskName",align:"center"},{title:"变更类型",key:"ISchangeType",align:"center"},{title:"变更数据",key:"changeValue",align:"center"},{title:"执行结果",key:"result",align:"center"},{title:"执行状态",key:"is_status",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"操作",width:160,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.enforcement(a.row)}}},"执行结果")])}}],data1:[],columns2:[{type:"index",width:70,align:"center",title:"序号"},{title:"mac",key:"mac",align:"center"},{title:"变更类型",key:"is_changeType",align:"center"},{title:"原有数据",key:"before",align:"center"},{title:"变更数据",key:"after",align:"center"},{title:"变更结果",key:"is_result",align:"center"},{title:"失败原因",key:"failReason",align:"center"}],data2:[],customerList:[],customerLoading:!1,commercialList:[],commercialLoading:!1,insideList:[],insideLoading:!1,fromType:1}},methods:{handleSuccess:function(e){console.log(e),this.info.filePath=e.data.url},getTableList:function(){var e=this,t=o(e.timer[0]).format("X"),a=o(e.timer[1]).format("X");isNaN(t)&&(t=""),isNaN(a)&&(a=""),e.$http.get(this.$config.BaseURL2+"/tv/change/list?taskName="+e.search.taskName+"&changeType="+e.search.changeType+"&startTime="+t+"&endTime="+a).then(function(t){1e4==t.data.errno&&(console.log(t),e.data1=t.data.data.list,t.data.data.list.forEach(function(e){1==e.changeType?e.ISchangeType="内部型号":2==e.changeType?e.ISchangeType="渠道":3==e.changeType?e.ISchangeType="批次":4==e.changeType?e.ISchangeType="订单号":5==e.changeType?e.ISchangeType="生产日期":6==e.changeType&&(e.ISchangeType="生产工厂"),1==e.result?e.ISresult="成功":0==e.result&&(e.ISresult="失败"),1==e.status?e.is_status="导入中":2==e.status?e.is_status="导入成功":3==e.status&&(e.is_status="导入失败")}))})},query:function(){this.page=1,this.getTableList()},details:function(e){this.news=e,console.log(this.news),this.modalDetails=!0},getCustomerList:function(e){var t=this;this.customerLoading=!0,""==typeof e&&(e=""),console.log(e),this.$http.get("".concat(this.$config.BaseURL2,"/tv/customer/list?customerName=").concat(e,"&pageSize=100")).then(function(e){1e4==e.data.errno&&(t.customerList=e.data.data.list),t.customerLoading=!1})},getCommercialList:function(e){var t=this;""==typeof e&&(e=""),""!=typeof this.info.customerId&&""!=this.info.customerId?(this.commercialLoading=!0,this.$http.get("".concat(this.$config.BaseURL2,"/tv/commercialmodel/list?customerId=").concat(this.info.customerId,"&insideName=").concat(e,"&pageSize=30")).then(function(e){1e4==e.data.errno&&(t.commercialList=e.data.data.list),t.commercialLoading=!1})):this.$Message.info("请先选择厂商")},getInsideList:function(e){var t=this;""==typeof e&&(e=""),""!=typeof this.info.customerId&&""!=this.info.customerId?(this.insideLoading=!0,this.$http.get("".concat(this.$config.BaseURL2,"/tv/insidemodel/list?customerId=").concat(this.info.customerId,"&insideName=").concat(e,"&pageSize=30")).then(function(e){1e4==e.data.errno&&(t.insideList=e.data.data.list),t.insideLoading=!1})):this.$Message.info("请先选择厂商")},editor:function(e){this.fromType=2,this.info=e,console.log(e)},okForm:function(){1==this.fromType&&this.addOk()},addOk:function(){var e=this;this.$http.post("".concat(this.$config.BaseURL2,"/tv/change/changetask"),this.info).then(function(t){1e4==t.data.errno&&(e.info={},e.page=1,e.getTableList(),e.$Message.success("添加成功！"))})},okFormcancel:function(){this.info={},this.modalAdd=!1},enforcement:function(e){console.log(e),this.taskId=e._id,this.getResultList(),this.modalEnforcement=!0},getResultList:function(){var e=this;this.$http(this.$config.BaseURL2+"/tv/change/result?taskId="+this.taskId+"&mac="+this.searchEnforcement.mac+"&result="+this.searchEnforcement.result+"&page="+this.pageEnforcement+"&pageSize="+this.pageSizeEnforcement).then(function(t){1e4==t.data.errno&&(console.log(t),e.data2=t.data.data.list,e.totalEnforcement=t.data.data.total,t.data.data.list.forEach(function(e){1==e.changeType?e.is_changeType="内部型号":2==e.changeType?e.is_changeType="渠道":3==e.changeType?e.is_changeType="批次":4==e.changeType?e.is_changeType="订单号":5==e.changeType?e.is_changeType="生产日期":6==e.changeType&&(e.is_changeType="生产工厂"),0==e.result?e.is_result="失败":1==e.result&&(e.is_result="成功")}))})},enforcementQuery:function(){this.pageEnforcement=1,this.getResultList()},changePageEnforcement:function(e){this.pageEnforcement=e,this.getResultList()}},mounted:function(){this.getTableList(),this.getCustomerList("")}},l=s,c=(a("763d"),a("2877")),r=Object(c["a"])(l,n,i,!1,null,null,null);r.options.__file="change.vue";t["default"]=r.exports}}]);