(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73c0"],{"7e83":function(t,e,n){},b64c:function(t,e,n){"use strict";var o=n("7e83"),a=n.n(o);a.a},fcea:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-scene"},[n("div",{staticClass:"layout-scene-search"},[n("Form",{attrs:{model:t.sceneSearch,inline:""}},[n("FormItem",{attrs:{label:"场景名称","label-width":65}},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入场景名称..."},model:{value:t.sceneSearch.name,callback:function(e){t.$set(t.sceneSearch,"name",e)},expression:"sceneSearch.name"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("搜索")])],1)],1)],1),n("div",{staticClass:"layout-scene-add"},[n("Button",{attrs:{type:"success"},on:{click:function(e){t.modalSceneAdd=!0}}},[t._v("添加")]),n("Modal",{attrs:{title:"添加场景"},model:{value:t.modalSceneAdd,callback:function(e){t.modalSceneAdd=e},expression:"modalSceneAdd"}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:t.okSceneAdd}},[t._v("确定")])],1),n("Form",{attrs:{model:t.sceneInfo,"label-position":"right","label-width":100}},[n("FormItem",{attrs:{label:"场景名称:"}},[n("Input",{attrs:{placeholder:"请输入场景名称..."},model:{value:t.sceneInfo.name,callback:function(e){t.$set(t.sceneInfo,"name",e)},expression:"sceneInfo.name"}})],1),n("FormItem",{attrs:{label:"描述:"}},[n("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.sceneInfo.description,callback:function(e){t.$set(t.sceneInfo,"description",e)},expression:"sceneInfo.description"}})],1)],1)],1)],1),n("div",{staticClass:"layout-scene-edit"},[n("Modal",{attrs:{title:"修改场景"},model:{value:t.modalSceneEdit,callback:function(e){t.modalSceneEdit=e},expression:"modalSceneEdit"}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a",{staticClass:"span",on:{click:t.SceneEditBtn}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:t.okSceneEdit}},[t._v("确定")])],1),n("Form",{attrs:{model:t.sceneEdit,"label-position":"right","label-width":100}},[n("FormItem",{attrs:{label:"场景名称:"}},[n("Input",{attrs:{placeholder:"请输入场景名称..."},model:{value:t.sceneEdit.name,callback:function(e){t.$set(t.sceneEdit,"name",e)},expression:"sceneEdit.name"}})],1),n("FormItem",{attrs:{label:"描述:"}},[n("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.sceneEdit.description,callback:function(e){t.$set(t.sceneEdit,"description",e)},expression:"sceneEdit.description"}})],1)],1)],1)],1),n("div",{staticStyle:{clear:"both"}}),n("div",{staticClass:"layout-scene-table"},[n("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),n("div",{staticClass:"layout-scene-page"},[n("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1),n("Modal",{attrs:{title:"场景内容",width:1100},model:{value:t.modalContent,callback:function(e){t.modalContent=e},expression:"modalContent"}},[n("div",{staticStyle:{float:"left"}},[n("Form",{attrs:{model:t.news,"label-width":70}},[n("FormItem",{attrs:{label:"场景名称:"}},[n("Input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.news.name,callback:function(e){t.$set(t.news,"name",e)},expression:"news.name"}})],1)],1)],1),n("div",{staticStyle:{float:"right"}},[n("Button",{attrs:{type:"success"},on:{click:function(e){t.modalContentAddBtn()}}},[t._v("添加")]),n("Modal",{attrs:{title:"添加场景内容"},model:{value:t.modalContentAdd,callback:function(e){t.modalContentAdd=e},expression:"modalContentAdd"}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a",{staticClass:"span",on:{click:t.contentAddCancel}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:t.okContentAdd}},[t._v("确定")])],1),n("Form",{attrs:{model:t.ContentInfo,"label-position":"right","label-width":100}},[n("FormItem",{attrs:{label:"场景内容:"}},[n("Input",{attrs:{placeholder:"请输入场景内容..."},model:{value:t.ContentInfo.name,callback:function(e){t.$set(t.ContentInfo,"name",e)},expression:"ContentInfo.name"}})],1),n("FormItem",{attrs:{label:"内容图片:"}},[n("Upload",{ref:"upload",attrs:{action:t.$config.BaseURLfile+"/common/upload/file",format:["jpg","jpeg","png"],"on-success":t.handleSuccess,"on-format-error":t.handleFormatError,"with-credentials":!0}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1),n("FormItem",{attrs:{label:"场景模板:"}},[n("Select",{model:{value:t.ContentInfo.customTemplateId,callback:function(e){t.$set(t.ContentInfo,"customTemplateId",e)},expression:"ContentInfo.customTemplateId"}},t._l(t.cityList,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1),n("FormItem",{attrs:{label:"场景类型:"}},[n("Select",{model:{value:t.ContentInfo.sceneTypeId,callback:function(e){t.$set(t.ContentInfo,"sceneTypeId",e)},expression:"ContentInfo.sceneTypeId"}},t._l(t.cityList1,function(e){return n("Option",{key:e.sceneTypeId,attrs:{value:e.sceneTypeId}},[t._v(t._s(e.sceneTypeName))])}))],1),n("FormItem",{attrs:{label:"排序:"}},[n("Input",{attrs:{placeholder:"请输入场景内容..."},model:{value:t.ContentInfo.sortId,callback:function(e){t.$set(t.ContentInfo,"sortId",e)},expression:"ContentInfo.sortId"}})],1)],1)],1)],1),n("div",{staticStyle:{clear:"both"}}),n("Table",{attrs:{border:"",columns:t.columns2,data:t.data2}})],1),n("Modal",{attrs:{title:"修改场景内容"},model:{value:t.modalContentdit,callback:function(e){t.modalContentdit=e},expression:"modalContentdit"}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a",{staticClass:"span",on:{click:t.modalContentditBtn}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:t.okContentEdit}},[t._v("确定")])],1),n("Form",{attrs:{model:t.ContentEdit,"label-position":"right","label-width":100}},[n("FormItem",{attrs:{label:"场景内容:"}},[n("Input",{attrs:{placeholder:"请输入场景内容..."},model:{value:t.ContentEdit.name,callback:function(e){t.$set(t.ContentEdit,"name",e)},expression:"ContentEdit.name"}})],1),n("FormItem",{attrs:{label:"内容图片:"}},[n("Upload",{ref:"upload1",attrs:{action:t.$config.BaseURLfile+"/common/upload/file","on-success":t.handleSuccess1,format:["jpg","jpeg","png"],"on-format-error":t.handleFormatError,"with-credentials":!0}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1),n("FormItem",{attrs:{label:"场景模板:"}},[n("Select",{model:{value:t.ContentEdit.customTemplateId,callback:function(e){t.$set(t.ContentEdit,"customTemplateId",e)},expression:"ContentEdit.customTemplateId"}},t._l(t.cityList,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1),n("FormItem",{attrs:{label:"场景类型:"}},[n("Select",{model:{value:t.ContentEdit.sceneTypeId,callback:function(e){t.$set(t.ContentEdit,"sceneTypeId",e)},expression:"ContentEdit.sceneTypeId"}},t._l(t.cityList1,function(e){return n("Option",{key:e.sceneTypeId,attrs:{value:e.sceneTypeId}},[t._v(t._s(e.sceneTypeName))])}))],1),n("FormItem",{attrs:{label:"排序:"}},[n("Input",{attrs:{placeholder:"请输入场景内容..."},model:{value:t.ContentEdit.sortId,callback:function(e){t.$set(t.ContentEdit,"sortId",e)},expression:"ContentEdit.sortId"}})],1)],1)],1)],1)},a=[],s=(n("7f7f"),{data:function(){var t=this;return{sceneSearch:{name:""},sceneId:"",contnetId:"",sceneInfo:{},modalSceneAdd:!1,sceneEdit:{},modalSceneEdit:!1,news:{},modalContent:!1,ContentInfo:{},addUploadUrl:"",editUploadUrl:"",modalContentAdd:!1,cityList:[],ContentEdit:{},modalContentdit:!1,cityList1:[],total:0,page:1,pageSize:30,columns1:[{title:"ID",key:"id",align:"center"},{title:"场景名称",key:"name",align:"center"},{title:"创建时间",key:"addTime",align:"center"},{title:"描述",key:"description",align:"center"},{title:"操作",width:200,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(n.row)}}},"修改"),e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.sceneContent(n.row)}}},"场景内容"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove(n.row)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[],columns2:[{title:"ID",key:"id",align:"center"},{title:"场景类型",key:"sceneTypeName",align:"center"},{title:"场景内容",key:"name",align:"center"},{title:"内容图片",key:"pictureUrl",align:"center",render:function(t,e){return t("div",[t("img",{attrs:{src:e.row.pictureUrl},style:{width:"50px",height:"50px",marginTop:"5px"}})])}},{title:"排序",key:"sortId",align:"center"},{title:"场景模板",key:"customTemplateTitle",align:"center"},{title:"操作",width:200,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifyContent(n.row)}}},"修改"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove1(n.row)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data2:[]}},methods:{handleSuccess:function(t,e){console.log(t),this.addUploadUrl=t.data.url,console.log(this.addUploadUrl)},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式文件名不正确，请选择JPG或PNG"})},handleSuccess1:function(t,e){console.log(t),this.editUploadUrl=t.data.url,console.log(this.editUploadUrl)},getTableList:function(){var t=this;this.$http(this.$config.BaseURL+"/scene/scene/list?name="+this.sceneSearch.name+"&page="+this.page+"&pageSize="+this.pageSize).then(function(e){1e4==e.data.errno&&(console.log(e),t.data1=e.data.data.list,t.total=e.data.data.total)})},query:function(){this.page=1,this.getTableList()},changePage:function(t){this.page=t,this.getTableList()},okSceneAdd:function(){var t=this;this.$http.post(this.$config.BaseURL+"/scene/scene/save",this.sceneInfo).then(function(e){1e4==e.data.errno&&(t.sceneInfo={},t.getTableList(),t.modalSceneAdd=!1,t.$Message.success("添加成功！"))})},addCancel:function(){this.sceneInfo={},this.modalSceneAdd=!1},modify:function(t){console.log(t),this.sceneEdit=t,this.modalSceneEdit=!0},okSceneEdit:function(){var t=this;this.$http.post(this.$config.BaseURL+"/scene/scene/save",this.sceneEdit).then(function(e){1e4==e.data.errno&&(t.getTableList(),t.modalSceneEdit=!1,t.$Message.success("修改成功！"))})},SceneEditBtn:function(){this.modalSceneEdit=!1,this.getTableList()},remove:function(t){var e=this;this.$http.get(this.$config.BaseURL+"/scene/scene/delete?id="+t.id).then(function(t){1e4==t.data.errno&&(e.getTableList(),e.$Message.success("删除成功！"))})},sceneContent:function(t){console.log(t),this.news=t,this.sceneId=t.id,this.getContentList(),this.getSelect(),this.getSelect1(),this.modalContent=!0},getContentList:function(){var t=this;this.$http.get(this.$config.BaseURL+"/scene/content/list?sceneId="+this.sceneId).then(function(e){1e4==e.data.errno&&(t.data2=e.data.data.list)})},getSelect:function(){var t=this;this.$http.get(this.$config.BaseURL+"/custompromotion/template/list").then(function(e){1e4==e.data.errno&&(t.cityList=e.data.data.list)})},getSelect1:function(){var t=this;this.$http.get(this.$config.BaseURL+"/scene/type/list").then(function(e){1e4==e.data.errno&&(t.cityList1=e.data.data.list)})},modalContentAddBtn:function(){this.addUploadUrl="",this.modalContentAdd=!0,this.$refs.upload.clearFiles()},okContentAdd:function(){var t=this;this.ContentInfo.pictureUrl=this.addUploadUrl,this.ContentInfo.sceneId=this.sceneId,this.$http.post(this.$config.BaseURL+"/scene/content/save",this.ContentInfo).then(function(e){1e4==e.data.errno&&(t.ContentInfo={},t.getContentList(),t.modalContentAdd=!1,t.$Message.success("添加成功！"))})},contentAddCancel:function(){this.ContentInfo={},this.modalContentAdd=!1},modifyContent:function(t){this.editUploadUrl="",t=JSON.parse(JSON.stringify(t)),this.ContentEdit=t,this.contnetId=t.id,this.modalContentdit=!0},okContentEdit:function(){var t=this;""!=this.editUploadUrl&&(this.ContentEdit.pictureUrl=this.editUploadUrl),this.$http.post(this.$config.BaseURL+"/scene/content/save",this.ContentEdit).then(function(e){1e4==e.data.errno&&(t.getContentList(),t.modalContentdit=!1,t.$Message.success("修改成功！"))})},modalContentditBtn:function(){this.modalContentdit=!1,this.getContentList()},remove1:function(t){var e=this;this.$http.get(this.$config.BaseURL+"/scene/content/delete?id="+t.id).then(function(t){1e4==t.data.errno&&(e.getContentList(),e.$Message.success("删除成功！"))})}},mounted:function(){this.getTableList()}}),i=s,l=(n("b64c"),n("2877")),c=Object(l["a"])(i,o,a,!1,null,null,null);c.options.__file="scene.vue";e["default"]=c.exports}}]);