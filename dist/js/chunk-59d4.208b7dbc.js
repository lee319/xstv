(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59d4"],{2918:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout-template"},[i("div",{staticClass:"layout-template-add"},[i("Button",{attrs:{type:"success"},on:{click:function(e){t.modalAdd=!0}}},[t._v("添加")]),i("Modal",{attrs:{title:"添加"},model:{value:t.modalAdd,callback:function(e){t.modalAdd=e},expression:"modalAdd"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a",{staticClass:"span",on:{click:t.addCancel}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.addOk}},[t._v("确定")])],1),i("Form",{attrs:{model:t.info,"label-position":"right","label-width":100}},[i("FormItem",{attrs:{label:"模板名称:"}},[i("Input",{attrs:{placeholder:"请输入模板名称..."},model:{value:t.info.title,callback:function(e){t.$set(t.info,"title",e)},expression:"info.title"}})],1),i("FormItem",{attrs:{label:"cp:"}},[i("Select",{model:{value:t.info.cp,callback:function(e){t.$set(t.info,"cp",e)},expression:"info.cp"}},t._l(t.cityList,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),i("FormItem",{attrs:{label:"描述:"}},[i("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.info.description,callback:function(e){t.$set(t.info,"description",e)},expression:"info.description"}})],1)],1)],1)],1),i("div",{staticClass:"layout-template-table"},[i("Table",{attrs:{border:"",columns:t.columns1,data:t.data1}})],1),i("div",{staticClass:"layout-template-page"},[i("Page",{attrs:{total:t.total,current:1,"page-size":t.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1),i("div",{staticClass:"layout-template-edit"},[i("Modal",{attrs:{title:"修改"},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a",{staticClass:"span",on:{click:t.modalEditBtn}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.editOk}},[t._v("确定")])],1),i("Form",{attrs:{model:t.edit,"label-position":"right","label-width":100}},[i("FormItem",{attrs:{label:"模板名称:"}},[i("Input",{attrs:{placeholder:"请输入模板名称..."},model:{value:t.edit.title,callback:function(e){t.$set(t.edit,"title",e)},expression:"edit.title"}})],1),i("FormItem",{attrs:{label:"cp:"}},[i("Select",{model:{value:t.edit.cp,callback:function(e){t.$set(t.edit,"cp",e)},expression:"edit.cp"}},t._l(t.cityList,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),i("FormItem",{attrs:{label:"描述:"}},[i("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述..."},model:{value:t.edit.description,callback:function(e){t.$set(t.edit,"description",e)},expression:"edit.description"}})],1)],1)],1)],1)])},o=[],n=(i("ac6a"),i("4328"),i("c1df")),l={data:function(){var t=this;return{info:{},modalAdd:!1,cityList:[],id:"",edit:{},modalEdit:!1,pageSize:30,page:1,total:0,columns1:[{title:"序号",type:"index",width:70,align:"center"},{title:"模版名称",key:"title",align:"center"},{title:"创建人",key:"addUser",align:"center"},{title:"创建时间",key:"addTime",align:"center"},{title:"修改人",key:"updateUser",align:"center"},{title:"修改时间",key:"updateTime",align:"center"},{title:"描述",key:"description",align:"center"},{title:"操作",width:160,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modify(i.row)}}},"修改"),e("Poptip",{props:{confirm:!0,title:"确定要删除吗！",type:"error",size:"small",width:"150"},on:{"on-ok":function(){t.remove(i.index)}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[]}},methods:{getTableList:function(){var t=this;t.$http(this.$config.BaseURL+"/staticpromotion/template/list?pageSize="+t.pageSize+"&page="+t.page).then(function(e){console.log(e),1e4==e.data.errno&&(t.data1=e.data.data.list,e.data.data.list.forEach(function(t){t.addTime=n(1e3*t.addTime).format("YYYY-MM-DD"),t.updateTime=n(1e3*t.updateTime).format("YYYY-MM-DD")}),t.total=e.data.data.total)},function(t){})},getSelectList:function(){var t=this;t.$http(this.$config.BaseURL+"/staticpromotion/cp/list").then(function(e){console.log(e),1e4==e.data.errno&&(t.cityList=e.data.data)})},addOk:function(){var t=this;t.$http.post(this.$config.BaseURL+"/staticpromotion/template/save",t.info).then(function(e){console.log(e),1e4==e.data.errno&&(t.info={},t.modalAdd=!1,t.getTableList(),t.$Message.success("添加成功！"))},function(t){})},addCancel:function(){this.modalAdd=!1},modify:function(t){console.log(t),this.modalEdit=!0,this.edit=t,this.id=t.id},editOk:function(){var t=this,e=this;e.$http.post(this.$config.BaseURL+"/staticpromotion/template/save?id="+this.id,e.edit).then(function(e){1e4==e.data.errno&&(t.edit={},t.modalEdit=!1,t.getTableList(),t.$Message.success("修改成功！"))})},modalEditBtn:function(){this.modalEdit=!1,this.getTableList()},remove:function(t){var e=this,i=this;i.$http(this.$config.BaseURL+"/staticpromotion/template/delete?id="+this.data1[t].id).then(function(t){1e4==t.data.errno&&(e.$Message.success("删除成功"),e.getTableList())},function(t){})},changePage:function(t){this.page=t,this.getTableList()}},mounted:function(){this.getTableList(),this.getSelectList()}},s=l,d=(i("725d"),i("2877")),c=Object(d["a"])(s,a,o,!1,null,null,null);c.options.__file="template.vue";e["default"]=c.exports},"62a0":function(t,e,i){},"725d":function(t,e,i){"use strict";var a=i("62a0"),o=i.n(a);o.a}}]);